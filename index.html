<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>AuthMe</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;java&quot;,&quot;php&quot;,&quot;Python&quot;,&quot;JS&quot;,&quot;Go&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="Python">Python</a>
              <a href="#" data-language-name="JS">JS</a>
              <a href="#" data-language-name="Go">Go</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Users keep same passwords everywhere. Despite you following security best practices, a data breach on an unrelated app can compromise your users.</p>

<p>AuthMe helps you do away with passwords. With AuthMe pattern lock, bring UX and security together.</p>

<h1 id="getting-started">Getting Started</h1>

<p>Before you start off, make sure that you have the API Key and Secret Key. If not, get them from <a href="https://account.authme.authme.host/generatekeys">here.</a></p>

<p>It can be found on the left panel of the dashboard.</p>

<p>API Key looks like this: <code class="prettyprint">k-162b77f3-5937-4856-af1b-7950a001f732</code> and can be exposed in public clients (Android, iOS, Windows apps)</p>

<p>Secret Key looks like this: <code class="prettyprint">s-001b77f3-5938-0056-af1b-7950a001f712</code> and should not be put in any public artifact.</p>

<p>Integration has 2 parts.</p>

<ol>
<li><p>Client Integration (Android/iOS/Window)</p></li>
<li><p>Server Integration (PHP/Java/Go/Python/Js)</p></li>
</ol>

<h1 id="android-integration">Android Integration</h1>

<h2 id="1-gradle-import">1. Gradle import</h2>

<p>Add the following line to your app build.gradle file</p>

<p><code class="prettyprint">compile &#39;io.authme:patternlock:0.1.2&#39;</code></p>

<p>Build your project.</p>

<h2 id="2-config">2. Config</h2>
<pre class="highlight java tab-java"><code>    <span class="n">Config</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Config</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setEnvironment</span><span class="o">(</span><span class="n">Config</span><span class="o">.</span><span class="na">SANDBOX</span><span class="o">);</span> 
    <span class="n">config</span><span class="o">.</span><span class="na">setAPIKey</span><span class="o">(</span><span class="s">"YOUR_API_KEY_HERE"</span><span class="o">);</span> 
</code></pre>
<p>Create a config object. </p>

<p>Set environment to <code class="prettyprint">Config.SANDBOX</code>, if you are testing. </p>

<p>Set it to <code class="prettyprint">Config.PRODUCTION</code> when you are ready.</p>

<aside class="notice">
Remember to replace API key with your API key before running the program.<br>
</aside>

<aside class="notice">
Ensure that the environment and keys are appropriate.
</aside>

<h2 id="3-call-authme">3. Call AuthMe</h2>
<pre class="highlight java tab-java"><code>   <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">AuthScreen</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
   <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"USER_EMAIL_ID"</span><span class="o">);</span>
   <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Call AuthScreen activity wherever you are signing up or signing in the user. </p>

<p>If the use has set the patter already, AuthMe will offer a trust score to you in the callback. </p>

<p>If not, AuthMe will help the user set the pattern. </p>

<h2 id="4-callback">4. Callback</h2>
<pre class="highlight java tab-java"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">switch</span> <span class="o">(</span><span class="n">requestCode</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">RESULT</span> <span class="o">:</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">resultCode</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">SIGNUP_PATTERN</span> <span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Sign up successfull"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                 <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">LOGIN_PATTERN</span> <span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">data</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"response"</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span> <span class="c1">//you will get a trust score in the response here.</span>
                <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">RESET_PATTERN</span><span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Reset Pattern"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">break</span><span class="o">;</span>            

            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">RESULT_FAILED</span> <span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Failed To Identify"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">hasExtra</span><span class="o">(</span><span class="s">"response"</span><span class="o">))</span> <span class="o">{</span>
                            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">data</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"response"</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                        <span class="o">}</span>
                <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

                <span class="k">default</span><span class="o">:</span> <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>

            <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

            <span class="k">default</span><span class="o">:</span> <span class="k">break</span><span class="o">;</span>

      <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<p>You will get the callback in onActivityResult. </p>

<h3 id="a-sign-up-successfull">a. Sign up successfull</h3>

<p>In case the user didn&rsquo;t have a pattern set earlier, we sign up the user. </p>

<p>Check for case Config.SIGNUP_PATTERN in onActivityResult.</p>

<h3 id="b-login-trust-score">b. Login Trust Score</h3>

<p>In case the user swiped to login, we calculate the trust score and give it back to you.</p>

<p>Check for case Config.LOGIN_PATTERN in onActivityResult.</p>

<h3 id="c-reset-pattern">c. Reset Pattern</h3>

<p>In case the user already exists on the platform, but forgot the pattern, we redirect you to reset the pattern.</p>

<p>Check for case Config.RESET_PATTERN in onActivityResult.</p>

<h3 id="d-failed-to-identify">d. Failed to Identify</h3>

<p>In case the user failed to identify with AuthMe.</p>

<p>Check for case Config.RESULT_FAILED in onActivityResult.</p>

<p>The code snippet on the right side shows how to handle these cases.</p>

<h2 id="5-trust-score">5. Trust Score</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"Accept"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="s2">"Id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="s2">"Reason"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="s2">"hash"</span><span class="p">:</span><span class="s2">"0352044c22fac6455b46de681701a733f86bca1f8477bf015d3ebd9817e2b9dc"</span><span class="p">,</span><span class="w">
</span><span class="s2">"Motion"</span><span class="p">:</span><span class="mi">83</span><span class="p">,</span><span class="w">
</span><span class="s2">"path"</span><span class="p">:</span><span class="mi">91</span><span class="p">,</span><span class="w">
</span><span class="s2">"speed"</span><span class="p">:</span><span class="mi">72</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In case the user tried to login, we send the trust score which looks as follows:</p>

<h3 id="whats-a-trust-score">What&rsquo;s a trust score?</h3>

<p>Trust score is the indication of how much the user matches to his behavioural profile.</p>

<p>Path score 0.9 means that user matches 90% to his signature behaviour.</p>

<p>Speed score 0.95 means that user matches 95% to his velocity behaviour.</p>

<p>Motion sensor 0.93 means that user matches 93% to his movements behaviour.</p>

<h3 id="whats-hash-why-is-it-so-important">What&rsquo;s hash? Why is it so important?</h3>

<p>You are expected to process the trust score on the server and implement the business logic on the server. </p>

<p>When you get a trust score in the LOGIN_PATTERN case above, post this on your server and calculate the hash to verify if the trust score is not tampered with.</p>

<aside class="warning">
If you bypass the logic of hash calculation, you are vulnarable to a security loophole.
</aside>

<p>In the server integration, we will demonstrate how hash is calculated.</p>

<h1 id="server-integration">Server Integration</h1>
<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.security.MessageDigest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.NoSuchAlgorithmException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">HashUtils</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SEPARATOR</span> <span class="o">=</span> <span class="s">"|"</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">HASH_KEY</span> <span class="o">=</span> <span class="s">"hash"</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SHA_256</span> <span class="o">=</span> <span class="s">"SHA-256"</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Exception</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">re</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">re</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"test"</span><span class="o">,</span> <span class="s">"hello"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">generateHash</span><span class="o">(</span><span class="n">re</span><span class="o">,</span> <span class="s">"YOUR_API_KEY"</span><span class="o">,</span> <span class="s">"YOUR_SECRET_KEY"</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateHash</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">requestMap</span><span class="o">,</span> <span class="n">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">String</span> <span class="n">apiSecret</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">NoSuchAlgorithmException</span> <span class="o">{</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">requestMap</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{});</span>
    <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">keys</span><span class="o">);</span>
    <span class="n">StringBuilder</span> <span class="n">hashString</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">(</span><span class="n">apiKey</span><span class="o">);</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">key</span> <span class="o">:</span> <span class="n">keys</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">HASH_KEY</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">key</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">continue</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">requestMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
      <span class="n">hashString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">SEPARATOR</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="n">hashString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">SEPARATOR</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">apiSecret</span><span class="o">);</span>

    <span class="n">MessageDigest</span> <span class="n">digest</span> <span class="o">=</span> <span class="n">MessageDigest</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">SHA_256</span><span class="o">);</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">digest</span><span class="o">.</span><span class="na">digest</span><span class="o">(</span><span class="n">hashString</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="k">return</span> <span class="nf">bytesToHex</span><span class="o">(</span><span class="n">hash</span><span class="o">);</span>


  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">bytesToHex</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">bytes</span><span class="o">)</span> <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">((</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="o">)</span> <span class="o">+</span> <span class="mh">0x100</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">authme</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">AuthmeClient</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">generate_hash</span><span class="p">(</span><span class="nv">$params</span><span class="p">,</span> <span class="nv">$apiKey</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">flatten_array</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
        <span class="nv">$str</span> <span class="o">.=</span> <span class="nv">$apiSecret</span><span class="p">;</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="nv">$apiKey</span> <span class="o">.</span> <span class="s2">"|"</span> <span class="o">.</span> <span class="nv">$str</span><span class="p">;</span>
        <span class="k">print</span> <span class="nv">$str</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="s2">"sha256"</span><span class="p">,</span> <span class="nv">$str</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">flatten_array</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s2">"|"</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
        <span class="nb">ksort</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$key</span> <span class="o">===</span> <span class="s2">"Hash"</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="nx">self</span><span class="o">::</span><span class="na">flatten_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_null</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="s2">"null"</span> <span class="o">.</span> <span class="s2">"|"</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_bool</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$bool_str</span> <span class="o">=</span> <span class="nv">$value</span> <span class="o">?</span> <span class="s2">"true"</span> <span class="o">:</span> <span class="s2">"false"</span><span class="p">;</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="nv">$bool_str</span> <span class="o">.</span> <span class="s2">"|"</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="nv">$value</span> <span class="o">.</span> <span class="s2">"|"</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$str</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request</span><span class="p">[</span><span class="s2">"test"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"hello"</span><span class="p">;</span>
<span class="nv">$hash</span> <span class="o">=</span> <span class="nx">AuthmeClient</span><span class="o">::</span><span class="na">generate_hash</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="s2">"YOUR_API_KEY"</span><span class="p">,</span> <span class="s2">"YOUR_SECRET_KEY"</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$hash</span> <span class="o">!=</span> <span class="s2">"292115573432d504b797a836e3a1936ea5ce9ef61bd90c8096dbd86c449d3d75"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="s2">"Hash is </span><span class="nv">$hash</span><span class="s2"> and not 292115573432d504b797a836e3a1936ea5ce9ef61bd90c8096dbd86c449d3d75"</span><span class="p">;</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s2">"hash mismatch"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">print</span> <span class="s2">"Hash: </span><span class="nv">$hash</span><span class="s2">"</span><span class="p">;</span>
</code></pre>
<p>Here&rsquo;s the logic to calculate hash. </p>

<p>Modules on the right side, should help you integrate this quickly.</p>

<p>Click on PHP, Java or other tabs as relevant to your server technology.</p>

<aside class="notice">
Remember to replace API & secret key with your API & secret key before deploying!
</aside>

<h1 id="add-ons">Add Ons</h1>

<h2 id="how-do-i-put-my-logo-on-the-authme-screen">How do I put my logo on the AuthMe Screen?</h2>
<pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">"mylogo"</span><span class="o">;</span>
<span class="n">Bitmap</span> <span class="n">bitmap</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeResource</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">getResources</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">nestaway_bird_logo</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ByteArrayOutputStream</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
            <span class="n">bitmap</span><span class="o">.</span><span class="na">compress</span><span class="o">(</span><span class="n">Bitmap</span><span class="o">.</span><span class="na">CompressFormat</span><span class="o">.</span><span class="na">JPEG</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="n">bytes</span><span class="o">);</span>
            <span class="n">FileOutputStream</span> <span class="n">fo</span> <span class="o">=</span> <span class="n">openFileOutput</span><span class="o">(</span><span class="n">fileName</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span> <span class="c1">// MODE_PRIAVE so that no one else can access this file</span>
            <span class="n">fo</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">());</span>
            <span class="n">fo</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"logo"</span><span class="o">,</span> <span class="n">fileName</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>a. Upload your logo in the drawable section of your app.</p>

<p>b. Create a bitmap of your logo and load it into a file accessible only to your app.</p>

<p>c. Add the filename in the intent before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

<h2 id="how-do-i-change-the-color-of-statusbar">How do I change the color of statusbar?</h2>
<pre class="highlight java tab-java"><code><span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"statusbar"</span><span class="o">,</span> <span class="s">"#443FFF"</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Add the intent extra &lsquo;statusbar&rsquo; before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

<h2 id="how-do-i-change-the-color-of-titlebar">How do I change the color of titlebar?</h2>
<pre class="highlight java tab-java"><code><span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"titlebar"</span><span class="o">,</span> <span class="s">"#443FFF"</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Add the intent extra &lsquo;titlebar&rsquo; before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

<h2 id="how-do-i-change-the-titlebar-text">How do I change the titlebar text?</h2>
<pre class="highlight java tab-java"><code><span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"titletext"</span><span class="o">,</span> <span class="s">"Authentication Screen"</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Add the intent extra &lsquo;titletext&rsquo; before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&lsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="Python">Python</a>
                <a href="#" data-language-name="JS">JS</a>
                <a href="#" data-language-name="Go">Go</a>
          </div>
      </div>
    </div>
  </body>
</html>
