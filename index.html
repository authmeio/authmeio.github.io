<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>AuthMe</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all_nosearch.js"></script>
  </head>

  <body class="index" data-languages="[&quot;java&quot;,&quot;php&quot;,&quot;Go&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="Go">Go</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Users keep same passwords everywhere. Despite you following security best practices, a data breach on an unrelated app can compromise your users.</p>

<p>AuthMe helps you do away with passwords. With AuthMe pattern lock, bring UX and security together.</p>

<h1 id="getting-started">Getting Started</h1>

<p>Before you start off, make sure that you have the API Key and Secret Key. If not, get them from <a href="https://account.authme.authme.host/generatekeys">here.</a></p>

<p>They can be found on the left panel of the dashboard.</p>

<p>API Key looks like this: <code class="prettyprint">k-162b77f3-5937-4856-af1b-7950a001f732</code> and can be exposed in public clients (Android, iOS, Windows apps)</p>

<p>Secret Key looks like this: <code class="prettyprint">s-001b77f3-5938-0056-af1b-7950a001f712</code> and should not be put in any public artifact.</p>

<p>Integration has 2 parts.</p>

<ol>
<li><p>Client Integration (Android/iOS/Window/Js Integration for web)</p></li>
<li><p>Server Integration (PHP/Java/Go)</p></li>
</ol>

<h1 id="android-integration">Android Integration</h1>

<h2 id="1-gradle-import">1. Gradle import</h2>

<p>Add the following line to your app build.gradle file</p>

<p><code class="prettyprint">compile &#39;io.authme:patternlock:0.1.9.5&#39;</code></p>

<p>Build your project.</p>

<h2 id="2-config">2. Config</h2>
<pre class="highlight java tab-java"><code>    <span class="n">Config</span> <span class="n">config</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Config</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">);</span>
    <span class="n">config</span><span class="o">.</span><span class="na">setEnvironment</span><span class="o">(</span><span class="n">Config</span><span class="o">.</span><span class="na">SANDBOX</span><span class="o">);</span> 
    <span class="n">config</span><span class="o">.</span><span class="na">setAPIKey</span><span class="o">(</span><span class="s">"YOUR_API_KEY_HERE"</span><span class="o">);</span> 
</code></pre>
<p>Create a config object. </p>

<p>Set environment to <code class="prettyprint">Config.SANDBOX</code>, if you are testing. </p>

<p>Set it to <code class="prettyprint">Config.PRODUCTION</code> when you are ready.</p>

<aside class="notice">
Remember to replace API key with your API key before running the program.<br>
</aside>

<aside class="notice">
Ensure that the environment and keys are appropriate.
</aside>

<h2 id="3-call-authme">3. Call AuthMe</h2>
<pre class="highlight java tab-java"><code>   <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">AuthScreen</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
   <span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"email"</span><span class="o">,</span> <span class="s">"USER_EMAIL_ID"</span><span class="o">);</span>
   <span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Call AuthScreen activity wherever you are signing up or signing in the user. </p>

<p>If the use has set the patter already, AuthMe will offer a trust score to you in the callback. </p>

<p>If not, AuthMe will help the user set the pattern. </p>

<h2 id="4-callback">4. Callback</h2>
<pre class="highlight java tab-java"><code><span class="nd">@Override</span>
<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onActivityResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="kt">int</span> <span class="n">resultCode</span><span class="o">,</span> <span class="n">Intent</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">switch</span> <span class="o">(</span><span class="n">requestCode</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="n">RESULT</span> <span class="o">:</span> <span class="o">{</span>
        <span class="k">switch</span> <span class="o">(</span><span class="n">resultCode</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">SIGNUP_PATTERN</span> <span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Sign up successfull"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                 <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">LOGIN_PATTERN</span> <span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">data</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"response"</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span> <span class="c1">//you will get a trust score in the response here.</span>
                <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">RESET_PATTERN</span><span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Reset Pattern"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">break</span><span class="o">;</span>            

            <span class="k">case</span> <span class="n">Config</span><span class="o">.</span><span class="na">RESULT_FAILED</span> <span class="o">:</span> <span class="o">{</span>
                <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">"Failed To Identify"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                        <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">hasExtra</span><span class="o">(</span><span class="s">"response"</span><span class="o">))</span> <span class="o">{</span>
                            <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="n">data</span><span class="o">.</span><span class="na">getStringExtra</span><span class="o">(</span><span class="s">"response"</span><span class="o">),</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">show</span><span class="o">();</span>
                        <span class="o">}</span>
                <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

                <span class="k">default</span><span class="o">:</span> <span class="k">break</span><span class="o">;</span>
                <span class="o">}</span>

            <span class="o">}</span> <span class="k">break</span><span class="o">;</span>

            <span class="k">default</span><span class="o">:</span> <span class="k">break</span><span class="o">;</span>

      <span class="o">}</span>
    <span class="o">}</span>
</code></pre>
<p>You will get the callback in onActivityResult. </p>

<h3 id="a-sign-up-successfull">a. Sign up successfull</h3>

<p>In case the user didn&rsquo;t have a pattern set earlier, we sign up the user. </p>

<p>Check for case Config.SIGNUP_PATTERN in onActivityResult.</p>

<h3 id="b-login-trust-score">b. Login Trust Score</h3>

<p>In case the user swiped to login, we calculate the trust score and give it back to you.</p>

<p>Check for case Config.LOGIN_PATTERN in onActivityResult.</p>

<h3 id="c-reset-pattern">c. Reset Pattern</h3>

<p>In case the user already exists on the platform, but forgot the pattern, we redirect you to reset the pattern.</p>

<p>Check for case Config.RESET_PATTERN in onActivityResult.</p>

<h3 id="d-failed-to-identify">d. Failed to Identify</h3>

<p>In case the user failed to identify with AuthMe.</p>

<p>Check for case Config.RESULT_FAILED in onActivityResult.</p>

<p>The code snippet on the right side shows how to handle these cases.</p>

<h2 id="5-trust-score">5. Trust Score</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"Accept"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="s2">"Id"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
</span><span class="s2">"Reason"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
</span><span class="s2">"hash"</span><span class="p">:</span><span class="s2">"0352044c22fac6455b46de681701a733f86bca1f8477bf015d3ebd9817e2b9dc"</span><span class="p">,</span><span class="w">
</span><span class="s2">"Motion"</span><span class="p">:</span><span class="mi">83</span><span class="p">,</span><span class="w">
</span><span class="s2">"Path"</span><span class="p">:</span><span class="mi">91</span><span class="p">,</span><span class="w">
</span><span class="s2">"Speed"</span><span class="p">:</span><span class="mi">72</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In case the user tried to login, we send the trust score which looks as follows:</p>

<h3 id="whats-a-trust-score">What&rsquo;s a trust score?</h3>

<p>Trust score is the indication of how much the user matches to his behavioural profile.</p>

<p>Path score 90 means that user matches 90% to his signature behaviour.</p>

<p>Speed score 72 means that user matches 72% to his velocity behaviour.</p>

<p>Motion sensor 93 means that user matches 93% to his movements behaviour.</p>

<h3 id="whats-hash-why-is-it-so-important">What&rsquo;s hash? Why is it so important?</h3>

<p>You are expected to process the trust score on the server and implement the business logic on the server. </p>

<p>When you get a trust score in the LOGIN_PATTERN case above, post this on your server and calculate the hash to verify if the trust score is not tampered with.</p>

<aside class="warning">
If you bypass the logic of hash calculation, you are vulnarable to a security loophole.
</aside>

<p>In the server integration, we will demonstrate how a hash is calculated.</p>

<h1 id="web-integration">Web Integration</h1>

<p>AuthMe web helps you identify the user based on device fingerprint + typing behaviour. </p>

<p>If the user exists on AuthMe network, you can identify the user based on just email or mobile phone.</p>

<h2 id="1-include-the-js">1. Include the js</h2>
<pre class="highlight javascript tab-javascript"><code><span class="o">&lt;</span><span class="nx">head</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">title</span><span class="o">&gt;</span><span class="nx">AuthMe</span> <span class="o">-</span> <span class="nx">Web</span> <span class="nx">Integration</span><span class="o">&lt;</span><span class="sr">/title</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">"https://api.authme.authme.host/typer.js"</span><span class="o">&gt;&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span>  <span class="o">&lt;</span><span class="nx">script</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text/javascript"</span><span class="o">&gt;</span>
    <span class="kd">function</span> <span class="nx">initAuthMe</span><span class="p">()</span> <span class="p">{</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">am</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AuthmeTyper</span><span class="p">();</span>
      <span class="nx">AuthmeTyper</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">information</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="nx">AuthmeTyper</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">startListener</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span><span class="o">&lt;</span><span class="sr">/head</span><span class="err">&gt;
</span></code></pre>
<p>As shown in the js code snippet on the right, include the typer.js in your html page.</p>

<p>Also, copy the initAuthMe() function call.</p>

<h2 id="2-create-a-login-form">2. Create a login form</h2>
<pre class="highlight javascript tab-javascript"><code><span class="o">&lt;</span><span class="nx">form</span> <span class="nx">action</span><span class="o">=</span><span class="s2">"#"</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"loginform"</span> <span class="nx">onsubmit</span><span class="o">=</span><span class="s2">"return false"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"text"</span> <span class="nx">name</span><span class="o">=</span><span class="s2">"logininput"</span> <span class="nx">placeholder</span><span class="o">=</span><span class="s2">"Email or Mobile"</span><span class="o">&gt;</span>
  <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="s2">"submit"</span> <span class="nx">value</span><span class="o">=</span><span class="s2">"login"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="sr">/form</span><span class="err">&gt;
</span></code></pre>
<p>This login form can capture any user identifier. </p>

<p>It could be either email id, mobile number or some primary key. </p>

<p>Longer the length of identifier, better the trust score.</p>

<h2 id="3-get-the-score">3. Get the score</h2>
<pre class="highlight javascript tab-javascript"><code><span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
<span class="nx">$</span><span class="p">(</span><span class="s2">"#loginform"</span> <span class="p">).</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">event</span> <span class="p">)</span> <span class="p">{</span>

  <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">am</span><span class="p">.</span><span class="nx">information</span><span class="p">;</span>

  <span class="nx">initAuthMe</span><span class="p">();</span>

  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
          <span class="na">url</span><span class="p">:</span> <span class="s1">'https://api.authme.authme.host/typing/check'</span><span class="p">,</span>
          <span class="na">dataType</span><span class="p">:</span> <span class="s1">'json'</span><span class="p">,</span>
          <span class="na">data</span><span class="p">:</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span>
            <span class="na">UserIdentifier</span><span class="p">:</span> <span class="s2">"email"</span><span class="p">,</span>
            <span class="na">Data</span><span class="p">:</span> <span class="nx">data</span>
          <span class="p">}),</span>
          <span class="na">headers</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">'X-Api-Key'</span><span class="p">:</span> <span class="s2">"&lt;YOUR_API_KEY&gt;"</span><span class="p">,</span>
          <span class="p">},</span>
          <span class="na">method</span><span class="p">:</span> <span class="s2">"POST"</span><span class="p">,</span>
          <span class="na">success</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">Data</span><span class="p">.</span><span class="nx">Score</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">json</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Data</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">})</span>

<span class="p">});</span>
<span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre>
<p>Copy this script into your HTML code. </p>

<p>This snippet gets executed when the user submits the form.</p>

<p>If user with the email/phone exists on the AuthMe network, you will get a trust score. </p>

<p>If not, you need to continue with your existing OTP/password flow. </p>

<aside class="notice">
Remember to replace YOUR_API_KEY with your API key before deploying!
</aside>

<h2 id="4-whats-a-trust-score">4. What&rsquo;s a trust score?</h2>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
</span><span class="s2">"Accept"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="s2">"Count"</span><span class="p">:</span><span class="mi">6</span><span class="p">,</span><span class="w">
</span><span class="s2">"Hash"</span><span class="p">:</span><span class="s2">"378dc964fccccfa65c5ea5f5dfc95655eb46679b57d934898fb6342f0add75eb"</span><span class="p">,</span><span class="w">
</span><span class="s2">"Input-0-Name"</span><span class="p">:</span><span class="s2">"text#logininput"</span><span class="p">,</span><span class="w">
</span><span class="s2">"Input-0-Score"</span><span class="p">:</span><span class="mi">93</span><span class="p">,</span><span class="w">
</span><span class="s2">"Score"</span><span class="p">:</span><span class="mi">93</span><span class="p">,</span><span class="w">
</span><span class="s2">"UserProfilePercent"</span><span class="p">:</span><span class="mi">100</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Trust score (see javascript section on the right) is an indication of how much the user matches with his/her typing behaviour.</p>

<p>You can have several inputs in the form such as <code class="prettyprint">&lt;input type=&quot;text&quot; name=&quot;logininput&quot; placeholder=&quot;Email or Mobile&quot;&gt;</code></p>

<p>You will receive the respective trust scores in the Input-<x>-Name and Input-<y>Score fields.</p>

<p>In the form mentioned above, there&rsquo;s only one input with name logininput.</p>

<p>Hence the trust score has Input-0-Name and its score respectively.</p>

<p><code class="prettyprint">var json</code> will have the trust score. </p>

<h2 id="5-what-to-do-with-the-trust-score">5. What to do with the trust score?</h2>

<p>Post this trust score to your server and calculate the hash to confirm that the score is not tampered with.</p>

<p>If the trust score is above 80%, you can log in the user. </p>

<p>If not, continue with the existing flow (OTP or passwords.)</p>

<aside class="warning">
If you bypass the logic of hash calculation, you are vulnarable to a security loophole.
</aside>

<p>In the server integration, we will demonstrate how a hash is calculated.</p>

<h1 id="server-integration">Server Integration</h1>
<pre class="highlight java tab-java"><code><span class="kn">import</span> <span class="nn">java.security.MessageDigest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.NoSuchAlgorithmException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>


<span class="kd">class</span> <span class="nc">HashUtils</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SEPARATOR</span> <span class="o">=</span> <span class="s">"|"</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">HASH_KEY</span> <span class="o">=</span> <span class="s">"hash"</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">SHA_256</span> <span class="o">=</span> <span class="s">"SHA-256"</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">Exception</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">re</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;();</span>
    <span class="n">re</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"test"</span><span class="o">,</span> <span class="s">"hello"</span><span class="o">);</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">generateHash</span><span class="o">(</span><span class="n">re</span><span class="o">,</span> <span class="s">"YOUR_API_KEY"</span><span class="o">,</span> <span class="s">"YOUR_SECRET_KEY"</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateHash</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">requestMap</span><span class="o">,</span> <span class="n">String</span> <span class="n">apiKey</span><span class="o">,</span> <span class="n">String</span> <span class="n">apiSecret</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">NoSuchAlgorithmException</span> <span class="o">{</span>
    <span class="n">String</span><span class="o">[]</span> <span class="n">keys</span> <span class="o">=</span> <span class="n">requestMap</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">toArray</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]{});</span>
    <span class="n">Arrays</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">keys</span><span class="o">);</span>
    <span class="n">StringBuilder</span> <span class="n">hashString</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">(</span><span class="n">apiKey</span><span class="o">);</span>

    <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">key</span> <span class="o">:</span> <span class="n">keys</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">HASH_KEY</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="n">key</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">continue</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">Object</span> <span class="n">value</span> <span class="o">=</span> <span class="n">requestMap</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
      <span class="n">hashString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">SEPARATOR</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">value</span><span class="o">));</span>
    <span class="o">}</span>

    <span class="n">hashString</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">SEPARATOR</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">apiSecret</span><span class="o">);</span>

    <span class="n">MessageDigest</span> <span class="n">digest</span> <span class="o">=</span> <span class="n">MessageDigest</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">SHA_256</span><span class="o">);</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">hash</span> <span class="o">=</span> <span class="n">digest</span><span class="o">.</span><span class="na">digest</span><span class="o">(</span><span class="n">hashString</span><span class="o">.</span><span class="na">toString</span><span class="o">().</span><span class="na">getBytes</span><span class="o">());</span>
    <span class="k">return</span> <span class="nf">bytesToHex</span><span class="o">(</span><span class="n">hash</span><span class="o">);</span>


  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">bytesToHex</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">bytes</span><span class="o">)</span> <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">toString</span><span class="o">((</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0xff</span><span class="o">)</span> <span class="o">+</span> <span class="mh">0x100</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="na">substring</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">namespace</span> <span class="nx">authme</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">AuthmeClient</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">generate_hash</span><span class="p">(</span><span class="nv">$params</span><span class="p">,</span> <span class="nv">$apiKey</span><span class="p">,</span> <span class="nv">$apiSecret</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="nx">self</span><span class="o">::</span><span class="na">flatten_array</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
        <span class="nv">$str</span> <span class="o">.=</span> <span class="nv">$apiSecret</span><span class="p">;</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="nv">$apiKey</span> <span class="o">.</span> <span class="s2">"|"</span> <span class="o">.</span> <span class="nv">$str</span><span class="p">;</span>
        <span class="k">print</span> <span class="nv">$str</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="s2">"sha256"</span><span class="p">,</span> <span class="nv">$str</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">private</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">flatten_array</span><span class="p">(</span><span class="nv">$data</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">empty</span><span class="p">(</span><span class="nv">$data</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="s2">"|"</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nv">$str</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
        <span class="nb">ksort</span><span class="p">(</span><span class="nv">$data</span><span class="p">);</span>
        <span class="k">foreach</span> <span class="p">(</span><span class="nv">$data</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$key</span> <span class="o">===</span> <span class="s2">"Hash"</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">continue</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="nx">self</span><span class="o">::</span><span class="na">flatten_array</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_null</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="s2">"null"</span> <span class="o">.</span> <span class="s2">"|"</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span><span class="nb">is_bool</span><span class="p">(</span><span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$bool_str</span> <span class="o">=</span> <span class="nv">$value</span> <span class="o">?</span> <span class="s2">"true"</span> <span class="o">:</span> <span class="s2">"false"</span><span class="p">;</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="nv">$bool_str</span> <span class="o">.</span> <span class="s2">"|"</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nv">$str</span> <span class="o">.=</span> <span class="nv">$value</span> <span class="o">.</span> <span class="s2">"|"</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nv">$str</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="nv">$request</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$request</span><span class="p">[</span><span class="s2">"test"</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"hello"</span><span class="p">;</span>
<span class="nv">$hash</span> <span class="o">=</span> <span class="nx">AuthmeClient</span><span class="o">::</span><span class="na">generate_hash</span><span class="p">(</span><span class="nv">$request</span><span class="p">,</span> <span class="s2">"YOUR_API_KEY"</span><span class="p">,</span> <span class="s2">"YOUR_SECRET_KEY"</span><span class="p">);</span>

<span class="k">if</span> <span class="p">(</span><span class="nv">$hash</span> <span class="o">!=</span> <span class="s2">"292115573432d504b797a836e3a1936ea5ce9ef61bd90c8096dbd86c449d3d75"</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">print</span> <span class="s2">"Hash is </span><span class="nv">$hash</span><span class="s2"> and not 292115573432d504b797a836e3a1936ea5ce9ef61bd90c8096dbd86c449d3d75"</span><span class="p">;</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">\Exception</span><span class="p">(</span><span class="s2">"hash mismatch"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">print</span> <span class="s2">"Hash: </span><span class="nv">$hash</span><span class="s2">"</span><span class="p">;</span>
</code></pre><pre class="highlight go tab-go"><code><span class="k">package</span><span class="x"> </span><span class="n">authmeclient</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="p">(</span><span class="x">
  </span><span class="s">"time"</span><span class="x">
  </span><span class="s">"net/http"</span><span class="x">
  </span><span class="s">"encoding/json"</span><span class="x">
  </span><span class="s">"io/ioutil"</span><span class="x">
  </span><span class="s">"bytes"</span><span class="x">
  </span><span class="s">"errors"</span><span class="x">
  </span><span class="s">"sort"</span><span class="x">
  </span><span class="s">"fmt"</span><span class="x">
  </span><span class="s">"strings"</span><span class="x">
  </span><span class="s">"crypto/sha256"</span><span class="x">
</span><span class="p">)</span><span class="x">

</span><span class="k">var</span><span class="x"> </span><span class="n">client</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="o">&amp;</span><span class="n">http</span><span class="o">.</span><span class="n">Client</span><span class="p">{}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">AuthmeClientInterface</span><span class="x"> </span><span class="k">interface</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">GetOrder</span><span class="p">(</span><span class="n">referenceId</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">Order</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
  </span><span class="n">InitOrder</span><span class="p">(</span><span class="n">AuthenticationRequest</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">Order</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
  </span><span class="n">InitOrderWithApiKey</span><span class="p">(</span><span class="n">orderPlace</span><span class="x"> </span><span class="n">AuthenticationRequest</span><span class="p">,</span><span class="x"> </span><span class="n">apiKey</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">Order</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">Order</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">Id</span><span class="x">          </span><span class="kt">uint64</span><span class="x"> </span><span class="s">`json:"-"`</span><span class="x">
  </span><span class="n">CreatedAt</span><span class="x">   </span><span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="x">
  </span><span class="n">ReferenceId</span><span class="x"> </span><span class="kt">string</span><span class="x">
  </span><span class="n">UserId</span><span class="x">      </span><span class="kt">uint64</span><span class="x">
  </span><span class="n">Comment</span><span class="x">     </span><span class="kt">string</span><span class="x">
  </span><span class="n">Status</span><span class="x">      </span><span class="kt">string</span><span class="x">
  </span><span class="n">Details</span><span class="x">     </span><span class="kt">string</span><span class="x">
  </span><span class="n">Token</span><span class="x">       </span><span class="o">*</span><span class="kt">string</span><span class="x">
  </span><span class="n">Data</span><span class="x">        </span><span class="o">*</span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">AuthmeClient</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">endPoint</span><span class="x">  </span><span class="kt">string</span><span class="x">
  </span><span class="n">apiKey</span><span class="x">    </span><span class="kt">string</span><span class="x">
  </span><span class="n">apiSecret</span><span class="x"> </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">type</span><span class="x"> </span><span class="n">AuthenticationRequest</span><span class="x"> </span><span class="k">struct</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">ReferenceId</span><span class="x">        </span><span class="kt">string</span><span class="x">
  </span><span class="n">UserIdentifier</span><span class="x">     </span><span class="kt">string</span><span class="x">
  </span><span class="n">UserIdentifierType</span><span class="x"> </span><span class="kt">string</span><span class="x">
  </span><span class="n">PublicKeyJson</span><span class="x">      </span><span class="kt">string</span><span class="x">
  </span><span class="n">Comment</span><span class="x">            </span><span class="kt">string</span><span class="x">
  </span><span class="n">Message</span><span class="x">            </span><span class="kt">string</span><span class="x">
  </span><span class="n">Ip</span><span class="x">                 </span><span class="kt">string</span><span class="x">
  </span><span class="n">Hash</span><span class="x">               </span><span class="kt">string</span><span class="x">
  </span><span class="n">Client</span><span class="x">             </span><span class="kt">string</span><span class="x">
  </span><span class="n">Data</span><span class="x">               </span><span class="kt">string</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">NewAuthmeClient</span><span class="p">(</span><span class="n">endPoint</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="n">AuthmeClientInterface</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">AuthmeClient</span><span class="p">{</span><span class="x">
    </span><span class="n">endPoint</span><span class="o">:</span><span class="x"> </span><span class="n">endPoint</span><span class="p">,</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">NewAuthmeClientWithApiKey</span><span class="p">(</span><span class="n">endPoint</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">apiKey</span><span class="x"> </span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="n">apiSecret</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="n">AuthmeClientInterface</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="o">&amp;</span><span class="n">AuthmeClient</span><span class="p">{</span><span class="x">
    </span><span class="n">endPoint</span><span class="o">:</span><span class="x"> </span><span class="n">endPoint</span><span class="p">,</span><span class="x">
    </span><span class="n">apiKey</span><span class="o">:</span><span class="x"> </span><span class="n">apiKey</span><span class="p">,</span><span class="x">
    </span><span class="n">apiSecret</span><span class="o">:</span><span class="x"> </span><span class="n">apiSecret</span><span class="p">,</span><span class="x">
  </span><span class="p">}</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">x</span><span class="x"> </span><span class="o">*</span><span class="n">AuthmeClient</span><span class="p">)</span><span class="x"> </span><span class="n">GenerateHash</span><span class="p">(</span><span class="n">request</span><span class="x"> </span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{})</span><span class="x"> </span><span class="kt">string</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">keys</span><span class="x"> </span><span class="p">[]</span><span class="kt">string</span><span class="x">
  </span><span class="c">//log.Infof("%v", x)</span><span class="x">
  </span><span class="k">for</span><span class="x"> </span><span class="n">k</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">request</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">k</span><span class="x"> </span><span class="o">==</span><span class="x"> </span><span class="s">"Hash"</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="k">continue</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="n">keys</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span><span class="x"> </span><span class="n">k</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">

  </span><span class="c">//givenHash, ok := request["Hash"]</span><span class="x">
  </span><span class="c">//if !ok {</span><span class="x">
  </span><span class="c">//    return false</span><span class="x">
  </span><span class="c">//}</span><span class="x">
  </span><span class="n">sort</span><span class="o">.</span><span class="n">Strings</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span><span class="x">
  </span><span class="n">values</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="kt">string</span><span class="p">,</span><span class="x"> </span><span class="m">1</span><span class="p">)</span><span class="x">
  </span><span class="n">values</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">x</span><span class="o">.</span><span class="n">apiKey</span><span class="x">

  </span><span class="k">for</span><span class="x"> </span><span class="n">_</span><span class="p">,</span><span class="x"> </span><span class="n">key</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">keys</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">var</span><span class="x"> </span><span class="n">v</span><span class="x"> </span><span class="kt">string</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="n">request</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">v</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%v"</span><span class="p">,</span><span class="x"> </span><span class="n">request</span><span class="p">[</span><span class="n">key</span><span class="p">])</span><span class="x">
    </span><span class="p">}</span><span class="x"> </span><span class="k">else</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="n">v</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">""</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="k">if</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">v</span><span class="p">)</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">1</span><span class="x"> </span><span class="p">{</span><span class="x">
      </span><span class="c">//values = append(values, "")</span><span class="x">
      </span><span class="k">continue</span><span class="x">
    </span><span class="p">}</span><span class="x">
    </span><span class="c">//log.Infof("%s: %v", key, v)</span><span class="x">
    </span><span class="n">values</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="x"> </span><span class="n">v</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="n">values</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">append</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="x"> </span><span class="n">x</span><span class="o">.</span><span class="n">apiSecret</span><span class="p">)</span><span class="x">

  </span><span class="n">hashString</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">strings</span><span class="o">.</span><span class="n">Join</span><span class="p">(</span><span class="n">values</span><span class="p">,</span><span class="x"> </span><span class="s">"|"</span><span class="p">)</span><span class="x">
  </span><span class="n">h</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">sha256</span><span class="o">.</span><span class="n">New</span><span class="p">()</span><span class="x">
  </span><span class="n">h</span><span class="o">.</span><span class="n">Write</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">hashString</span><span class="p">))</span><span class="x">
  </span><span class="n">bs</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">h</span><span class="o">.</span><span class="n">Sum</span><span class="p">(</span><span class="no">nil</span><span class="p">)</span><span class="x">
  </span><span class="n">calculatedHash</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%x"</span><span class="p">,</span><span class="x"> </span><span class="n">bs</span><span class="p">)</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="n">calculatedHash</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">ac</span><span class="x"> </span><span class="o">*</span><span class="n">AuthmeClient</span><span class="p">)</span><span class="x"> </span><span class="n">GetOrder</span><span class="p">(</span><span class="n">referenceId</span><span class="x">  </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">Order</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">

  </span><span class="n">url</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ac</span><span class="o">.</span><span class="n">endPoint</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="s">"/order/"</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="n">referenceId</span><span class="x">
  </span><span class="n">response</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">Order</span><span class="p">{},</span><span class="x"> </span><span class="n">err</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="n">content</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">order</span><span class="x"> </span><span class="n">Order</span><span class="x">
  </span><span class="n">json</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">(</span><span class="n">content</span><span class="p">,</span><span class="x"> </span><span class="o">&amp;</span><span class="n">order</span><span class="p">)</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="n">order</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">ac</span><span class="x"> </span><span class="o">*</span><span class="n">AuthmeClient</span><span class="p">)</span><span class="x"> </span><span class="n">InitOrder</span><span class="p">(</span><span class="n">order</span><span class="x"> </span><span class="n">AuthenticationRequest</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">Order</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="nb">len</span><span class="p">(</span><span class="n">ac</span><span class="o">.</span><span class="n">apiKey</span><span class="p">)</span><span class="x"> </span><span class="o">&lt;</span><span class="x"> </span><span class="m">2</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="nb">panic</span><span class="p">(</span><span class="n">errors</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="s">"ApiKey not set"</span><span class="p">))</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="n">ac</span><span class="o">.</span><span class="n">InitOrderWithApiKey</span><span class="p">(</span><span class="n">order</span><span class="p">,</span><span class="x"> </span><span class="n">ac</span><span class="o">.</span><span class="n">apiKey</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="p">(</span><span class="n">ac</span><span class="x"> </span><span class="o">*</span><span class="n">AuthmeClient</span><span class="p">)</span><span class="x"> </span><span class="n">InitOrderWithApiKey</span><span class="p">(</span><span class="n">orderPlace</span><span class="x"> </span><span class="n">AuthenticationRequest</span><span class="p">,</span><span class="x"> </span><span class="n">apiKey</span><span class="x"> </span><span class="kt">string</span><span class="p">)</span><span class="x"> </span><span class="p">(</span><span class="n">Order</span><span class="p">,</span><span class="x"> </span><span class="kt">error</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">
  </span><span class="n">jsonRequest</span><span class="p">,</span><span class="x"> </span><span class="n">_</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">json</span><span class="o">.</span><span class="n">Marshal</span><span class="p">(</span><span class="n">orderPlace</span><span class="p">)</span><span class="x">
  </span><span class="n">req</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">http</span><span class="o">.</span><span class="n">NewRequest</span><span class="p">(</span><span class="s">"POST"</span><span class="p">,</span><span class="x"> </span><span class="n">ac</span><span class="o">.</span><span class="n">endPoint</span><span class="x"> </span><span class="o">+</span><span class="x"> </span><span class="s">"/order"</span><span class="p">,</span><span class="x"> </span><span class="n">bytes</span><span class="o">.</span><span class="n">NewBuffer</span><span class="p">(</span><span class="n">jsonRequest</span><span class="p">))</span><span class="x">
  </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"Content-Type"</span><span class="p">,</span><span class="x"> </span><span class="s">"application/json"</span><span class="p">)</span><span class="x">
  </span><span class="n">req</span><span class="o">.</span><span class="n">Header</span><span class="o">.</span><span class="n">Set</span><span class="p">(</span><span class="s">"X-API-KEY"</span><span class="p">,</span><span class="x"> </span><span class="n">apiKey</span><span class="p">)</span><span class="x">

  </span><span class="n">resp</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">client</span><span class="o">.</span><span class="n">Do</span><span class="p">(</span><span class="n">req</span><span class="p">)</span><span class="x">

  </span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="k">return</span><span class="x"> </span><span class="n">Order</span><span class="p">{},</span><span class="x"> </span><span class="n">err</span><span class="x">
  </span><span class="p">}</span><span class="x">
  </span><span class="n">body</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ioutil</span><span class="o">.</span><span class="n">ReadAll</span><span class="p">(</span><span class="n">resp</span><span class="o">.</span><span class="n">Body</span><span class="p">)</span><span class="x">
  </span><span class="k">var</span><span class="x"> </span><span class="n">o</span><span class="x"> </span><span class="n">Order</span><span class="x">
  </span><span class="n">json</span><span class="o">.</span><span class="n">Unmarshal</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">body</span><span class="p">),</span><span class="x"> </span><span class="o">&amp;</span><span class="n">o</span><span class="p">)</span><span class="x">
  </span><span class="k">return</span><span class="x"> </span><span class="n">o</span><span class="p">,</span><span class="x"> </span><span class="no">nil</span><span class="x">
</span><span class="p">}</span><span class="x">


</span><span class="c">/*------------------------------------------------------------------------------------------------------------*/</span><span class="x">
</span><span class="k">package</span><span class="x"> </span><span class="n">authmeclient</span><span class="x">

</span><span class="k">import</span><span class="x"> </span><span class="s">"testing"</span><span class="x">

</span><span class="k">func</span><span class="x"> </span><span class="n">TestHashCalculation</span><span class="p">(</span><span class="n">t</span><span class="x"> </span><span class="o">*</span><span class="n">testing</span><span class="o">.</span><span class="n">T</span><span class="p">)</span><span class="x"> </span><span class="p">{</span><span class="x">

  </span><span class="n">ac</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">AuthmeClient</span><span class="p">{</span><span class="x">
    </span><span class="n">apiKey</span><span class="o">:</span><span class="x"> </span><span class="s">"YOUR_API_KEY"</span><span class="p">,</span><span class="x">
    </span><span class="n">apiSecret</span><span class="o">:</span><span class="x"> </span><span class="s">"YOUR_SECRET_KEY"</span><span class="p">,</span><span class="x">
  </span><span class="p">}</span><span class="x">

  </span><span class="n">request</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{})</span><span class="x">
  </span><span class="n">request</span><span class="p">[</span><span class="s">"test"</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"hello"</span><span class="x">

  </span><span class="n">calculatedHash</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">ac</span><span class="o">.</span><span class="n">GenerateHash</span><span class="p">(</span><span class="n">request</span><span class="p">)</span><span class="x">
  </span><span class="n">t</span><span class="o">.</span><span class="n">Logf</span><span class="p">(</span><span class="s">"Calculated hash: %s"</span><span class="p">,</span><span class="x"> </span><span class="n">calculatedHash</span><span class="p">)</span><span class="x">
  </span><span class="k">if</span><span class="x"> </span><span class="n">calculatedHash</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="s">"292115573432d504b797a836e3a1936ea5ce9ef61bd90c8096dbd86c449d3d75"</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">t</span><span class="o">.</span><span class="n">Fail</span><span class="p">()</span><span class="x">
    </span><span class="n">t</span><span class="o">.</span><span class="n">Error</span><span class="p">(</span><span class="s">"Failed, expected hash 292115573432d504b797a836e3a1936ea5ce9ef61bd90c8096dbd86c449d3d75"</span><span class="p">)</span><span class="x">
  </span><span class="p">}</span><span class="x">

</span><span class="p">}</span><span class="x">
</span></code></pre>
<p>Here&rsquo;s the logic to calculate hash. </p>

<p>Modules on the right side, should help you integrate this quickly.</p>

<p>Click on PHP, Java or other tabs as relevant to your server technology.</p>

<aside class="notice">
Remember to replace API & secret key with your API & secret key before deploying!
</aside>

<h1 id="add-ons">Add Ons</h1>

<h2 id="how-do-i-put-my-logo-on-the-authme-screen">How do I put my logo on the AuthMe Screen?</h2>
<pre class="highlight java tab-java"><code><span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="s">"mylogo"</span><span class="o">;</span>
<span class="n">Bitmap</span> <span class="n">bitmap</span> <span class="o">=</span> <span class="n">BitmapFactory</span><span class="o">.</span><span class="na">decodeResource</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">.</span><span class="na">getResources</span><span class="o">(),</span> <span class="n">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">nestaway_bird_logo</span><span class="o">);</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">ByteArrayOutputStream</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ByteArrayOutputStream</span><span class="o">();</span>
            <span class="n">bitmap</span><span class="o">.</span><span class="na">compress</span><span class="o">(</span><span class="n">Bitmap</span><span class="o">.</span><span class="na">CompressFormat</span><span class="o">.</span><span class="na">JPEG</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="n">bytes</span><span class="o">);</span>
            <span class="n">FileOutputStream</span> <span class="n">fo</span> <span class="o">=</span> <span class="n">openFileOutput</span><span class="o">(</span><span class="n">fileName</span><span class="o">,</span> <span class="n">Context</span><span class="o">.</span><span class="na">MODE_PRIVATE</span><span class="o">);</span> <span class="c1">// MODE_PRIAVE so that no one else can access this file</span>
            <span class="n">fo</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">.</span><span class="na">toByteArray</span><span class="o">());</span>
            <span class="n">fo</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="n">fileName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="o">}</span>
<span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"logo"</span><span class="o">,</span> <span class="n">fileName</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>a. Upload your logo in the drawable section of your app.</p>

<p>b. Create a bitmap of your logo and load it into a file accessible only to your app.</p>

<p>c. Add the filename in the intent before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

<h2 id="how-do-i-change-the-color-of-statusbar">How do I change the color of statusbar?</h2>
<pre class="highlight java tab-java"><code><span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"statusbar"</span><span class="o">,</span> <span class="s">"#443FFF"</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Add the intent extra &lsquo;statusbar&rsquo; before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

<h2 id="how-do-i-change-the-color-of-titlebar">How do I change the color of titlebar?</h2>
<pre class="highlight java tab-java"><code><span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"titlecolor"</span><span class="o">,</span> <span class="s">"#443FFF"</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Add the intent extra &lsquo;titlecolor&rsquo; before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

<h2 id="how-do-i-change-the-titlebar-text">How do I change the titlebar text?</h2>
<pre class="highlight java tab-java"><code><span class="n">intent</span><span class="o">.</span><span class="na">putExtra</span><span class="o">(</span><span class="s">"titletext"</span><span class="o">,</span> <span class="s">"Authentication Screen"</span><span class="o">);</span>
<span class="n">startActivityForResult</span><span class="o">(</span><span class="n">intent</span><span class="o">,</span> <span class="n">RESULT</span><span class="o">);</span>
</code></pre>
<p>Add the intent extra &lsquo;titletext&rsquo; before calling <code class="prettyprint">startActivityForResult(intent, RESULT)</code></p>

          <h1 id="errors">Errors</h1>

<aside class="notice">This error section is stored in a separate file in `includes/_errors.md`. Slate allows you to optionally separate out your docs into many files&hellip;just save them to the `includes` folder and add them to the top of your `index.md`&lsquo;s frontmatter. Files are included in the order listed.</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your API key is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; The kitten requested is hidden for administrators only</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified kitten could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a kitten with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>410</td>
<td>Gone &ndash; The kitten requested has been removed from our servers</td>
</tr>
<tr>
<td>418</td>
<td>I&rsquo;m a teapot</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="Go">Go</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
